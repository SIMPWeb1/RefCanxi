(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{77472:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i(50029),s=i(59499),r=i(20671),o=i(24397),a=i(65365),l=i(6154),d=i(11081),u=i(67294),m=i(55678),p=i(85893);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,s.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function f(){var e,{0:t,1:i}=(0,u.useState)(!0),s=u.useRef(null),{wallet:c,setWallet:f}=(0,u.useContext)(o._y),{setUsers:h}=u.useContext(o.HJ),{me:y,setMe:_}=(0,u.useContext)(o.St),w={prompt:"",negative_prompt:"",guidance_scale:7.5,steps:"20",width:"512",height:"640",model_id:"synthwave-diffusion",seed:"0",id:y,style:"PulseSynth",runtime:50,method:"Image",strength:.5,initImage:null,title:null,speed:"auto"},{setDeleting:b,loading:k,setLoading:v,newImages:O,setNewImages:S,setSelectedFilter:x,authorized:P,setGetDataInterval:I,setGetNewImage:j}=(0,u.useContext)(o.$i),[K,N]=u.useState(0),[D,E]=u.useState(50),[C,R]=u.useState(0),[T,Z]=u.useState(),[A,G]=u.useState(w);(0,u.useEffect)(()=>{G(w),N(0),x("Recent")},[]),(0,u.useEffect)(()=>{P&&y?G(e=>g(g({},e),{},{id:y})):G(e=>g(g({},e),{},{id:{username:void 0}}))},[P,y]);var V=(e=(0,n.Z)(function*(e){if(e.preventDefault(),""!==A.prompt){if(["nsfw","nude","naked","pussy","vagina","dick","cock","penis","hussy","loli","shota","xnxx","porn","hentai","asshole","sex","xxx","xhamster","boob","prostitute","prostitution","lewdness","obscenity","pornography","vulgarity","coarseness","dildo","erotic","sperm","dirty","fuck","filth","indecency","smut"].some(e=>A.prompt.toLowerCase().includes(e)))m.Am.warn("You are using a banned word");else{var i=(0,d.M)(),n=[...O,{meta:{prompt:A.prompt,init_image:A.initImage,H:Number(A.height),W:Number(A.width)},dateGenerated:new Date().getTime(),published:!1,user:y,method:A.method,style:"Kandinsky"===A.model_id?"Kandinsky":A.style,runtime:A.runtime,likes:[],progressing:!0,shares:[],title:null!==A.title?A.title:A.prompt.slice(0,15),track_id:i}];if(S(n.sort(function(e,t){return t.dateGenerated-e.dateGenerated}).filter((e,t)=>t===n.findIndex(t=>e.track_id===t.track_id))),v(!0),setTimeout(()=>{v(!1)},1e3),null!==A.initImage&&A.initImage.name){var{data:s,error:r}=yield a.O.storage.from("initimages").upload("".concat(c,"/initimage").concat(new Date().getTime(),".png"),A.initImage,{cacheControl:"3600",upsert:!1});if(null===r&&s.path){var o=a.O.storage.from("initimages").getPublicUrl(s.path);I(!0),l.Z.post("/api/",g(g({},A),{},{seed:t?"0":A.seed,title:null!==A.title?A.title:A.prompt.slice(0,15),strength:A.initImage.name?D/100:null,initImage:o.data.publicUrl,prompt:"Kandinsky"===A.model_id?A.prompt+" in the style of Kandinsky":A.prompt,style:"Kandinsky"===A.model_id?"Kandinsky":A.style,model_id:"Kandinsky"===A.model_id?"arcane-diffusion":A.model_id,track_id:i}),{timeout:3e5}).catch(e=>{m.Am.error(e.response.message)})}}else I(!0),yield l.Z.post("/api/",g(g({},A),{},{seed:t?"0":A.seed,title:null!==A.title?A.title:A.prompt.slice(0,15),strength:Number(D/100),prompt:"Kandinsky"===A.model_id?A.prompt+" in the style of Kandinsky":A.prompt,style:"Kandinsky"===A.model_id?"Kandinsky":A.style,model_id:"Kandinsky"===A.model_id?"arcane-diffusion":A.model_id,track_id:i}),{timeout:3e5}).catch(e=>{e.message.includes("504")||(m.Am.error("Something went wrong!"),console.log(e),S(e=>e.filter(e=>!e.progressing)))});setTimeout(()=>{},1500)}}else I(!0)}),function(t){return e.apply(this,arguments)});return(0,p.jsx)(r.Z,{authorized:P,handleSubmit:V,formValues:A,setformValues:G,loading:k,active:K,randomSeed:t,setRandomSeed:i,newImages:O,setNewImages:S,item:T,setWallet:f,imageStrength:D,setDeleting:b,setimageStrength:E,setItem:Z,setActive:N,negativePromptRows:C,setNegativePromptRows:R,formRef:s,setLoading:v,setGetDataInterval:I,initFormValues:w,wallet:c})}},35452:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createwithai",function(){return i(77472)}])}},function(e){e.O(0,[617,874,937,866,860,893,497,379,795,372,271,827,431,774,888,179],function(){return e(e.s=35452)}),_N_E=e.O()}]);